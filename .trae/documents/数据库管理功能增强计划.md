# 功能增强计划

针对您的需求，我将分三个部分进行功能实现：

## 1. 编辑数据库功能 (Edit Database)
*   **目标**: 实现数据库属性编辑（字符集和排序规则）。
*   **实现**:
    *   **后端**: 增加 `db:get-database-info` 获取当前字符集，增加 `db:alter-database` 执行 `ALTER DATABASE` 语句。
    *   **前端**: 点击 "Edit Database" 时弹出模态框，允许选择 Charset 和 Collation，点击保存后调用后端接口。

## 2. 表操作右键菜单 (Table Context Menu)
*   **目标**: 丰富侧边栏表的右键菜单功能。
*   **新增功能**:
    *   **Truncate Table (清空表)**: 执行 `TRUNCATE TABLE`，需二次确认。
    *   **Delete Table (删除表)**: 执行 `DROP TABLE`，需二次确认。
    *   **Dump SQL File (导出 SQL)**: 复用已有的导出逻辑，针对单表生成结构和数据的 SQL 文件。
    *   **Rename Table (重命名)**: 弹出输入框，执行 `RENAME TABLE`。
*   **实现**: 更新 `Sidebar.tsx` 中的 `handleContextMenu`，增加相应菜单项和处理逻辑。

## 3. 数据查看器增强 (Data Viewer Enhancements)
*   **目标**: 提供完整的数据增删改查能力。
*   **新增功能**:
    *   **添加新记录 (Add Record)**: 工具栏增加 "Add Record" 按钮，复用现有的编辑弹窗（空白状态），保存时执行 `INSERT INTO`。
    *   **删除记录 (Delete Record)**: 每一行增加删除按钮（或右键菜单），执行 `DELETE FROM ... WHERE PK=...`。
    *   **批量删除 (Batch Delete)**: 增加复选框列，工具栏增加 "Delete Selected" 按钮，批量执行删除。
*   **实现**:
    *   **后端**: 增加 `db:insert-row` 和 `db:delete-rows` 接口。
    *   **前端**: 改造 `DataViewer.tsx`，增加 Checkbox 列、顶部工具栏按钮、行内操作列。

## 执行计划
1.  **数据库编辑**: 实现后端 `alter-database` 和前端弹窗。
2.  **表右键菜单**: 实现 Truncate/Drop/Rename/Dump 的后端接口及前端菜单逻辑。
3.  **数据增删**: 实现 Insert/Delete 后端接口，改造 `DataViewer` 支持新增和批量删除。
